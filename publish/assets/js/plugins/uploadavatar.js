jQuery((function(){"use strict";var a=suda.link("/"+suda.data("adminPath")+"/profile/upload/avatar");$("#fileupload").fileupload({url:a,dataType:"json",formData:{_token:suda.data("csrfToken"),media_type:$("#fileupload").attr("media_type")},done:function(a,e){var s=e.jqXHR.responseJSON,d=$("#fileupload").parent(".fileinput-avatar");s.image?(d.find(".zpress-image").length>0&&d.find(".zpress-image").remove(),d.append(s.image)):suda.modal("上传失败,请重试")},progressall:function(a,e){var s=parseInt(e.loaded/e.total*100,10);$("#progress .progress-bar").css("width",s+"%")},fail:function(a,e){var s=e.jqXHR;if(413==s.status&&suda.modal("上传文件过大，请重新上传"),422==s.status||405==s.status){if(s.responseJSON)d=(d=s.responseJSON).response_msg?d.response_msg:"请求异常,请稍后重试";else var d="请求异常,请稍后重试";suda.modal(d)}else suda.modal("请求异常,请稍后重试")}}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")}));